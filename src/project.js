require=function l(r,d,c){function u(t,e){if(!d[t]){if(!r[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(s)return s(t,!0);var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}var o=d[t]={exports:{}};r[t][0].call(o.exports,function(e){return u(r[t][1][e]||e)},o,o.exports,l,r,d,c)}return d[t].exports}for(var s="function"==typeof require&&require,e=0;e<c.length;e++)u(c[e]);return u}({ChangeDialogue:[function(e,t,n){"use strict";cc._RF.push(t,"80fd7FttYxOA7Bx0+9sEynP","ChangeDialogue"),cc.Class({extends:cc.Component,properties:{canvas:{default:null,type:cc.Node},label1:{default:null,type:cc.Label},label2:{default:null,type:cc.Label},button1:{default:null,type:cc.Node},button2:{default:null,type:cc.Node},button1Prefab:{default:null,type:cc.Prefab},button2Prefab:{default:null,type:cc.Prefab},bugBGM:{default:null,type:cc.AudioSource},index:0},changeDialogue:function(){0==this.index?(this.label1.string="",this.label2.string="王子：什么魔法？",this.index++):1==this.index?(this.label1.string="霸主：我能够随意改变这片森林的布局，森林中的树木、宝石和祭坛的位置都在我的意念操纵下。只要你愿意，你可以继续无限次地挑战我的无尽森林，但是绝不会像刚才那样简单。我的手下依然会挡路，不过你不必再和他们战斗了，只要给他50金币他就会让开。你每挑战成功一次，我都会送你一些金币，连续过关越多送得越多。继续来吗？",this.label2.string="",this.index++):2==this.index&&(this.label1.string="",this.button1=cc.instantiate(this.button1Prefab),this.button2=cc.instantiate(this.button2Prefab),this.canvas.addChild(this.button1,0),this.canvas.addChild(this.button2,0),this.index++,cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN),cc.systemEvent.off(cc.Node.EventType.TOUCH_START),cc.systemEvent.off(cc.Node.EventType.MOUSE_DOWN))},start:function(){var t=this;cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,function(e){t.changeDialogue()}),cc.systemEvent.on(cc.Node.EventType.TOUCH_START,function(e){t.changeDialogue()}),cc.systemEvent.on(cc.Node.EventType.MOUSE_DOWN,function(e){t.changeDialogue()}),this.bugBGM.play()}}),cc._RF.pop()},{}],MoneyNode:[function(e,t,n){"use strict";cc._RF.push(t,"9c32bv/9PFHy6bqGlTPckM6","MoneyNode"),cc.Class({extends:cc.Component,properties:{money:100},start:function(){cc.game.isPersistRootNode(this.node)||cc.game.addPersistRootNode(this.node)}}),cc._RF.pop()},{}],Player2:[function(e,t,n){"use strict";cc._RF.push(t,"dfbc5hPqhdOgZMOMIBxG0sn","Player2");var a=cc.Class({name:"NodeData"}),o=cc.Class({name:"NodeDataArray"});cc.Class({extends:cc.Component,properties:{atlas:{default:null,type:cc.SpriteAtlas},canvas:{default:null,type:cc.Node},background:{default:null,type:cc.Node},monster1:{default:null,type:cc.Node},monster2:{default:null,type:cc.Node},redJewel:{default:null,type:cc.Node},yellowJewel:{default:null,type:cc.Node},blueJewel:{default:null,type:cc.Node},greenJewel:{default:null,type:cc.Node},altar:{default:null,type:cc.Node},stepLabel:{default:null,type:cc.Label},lifeLabel:{default:null,type:cc.Label},jewelLabel:{default:null,type:cc.Label},moneyLabel:{default:null,type:cc.Label},nodeLabel:{default:null,type:cc.Label},nodeData:o,currentNode:0,validNodeCount:0,stepCount:500,lifeCount:3,moneyNode:{default:null,type:cc.Node},redJewelGot:!1,yellowJewelGot:!1,blueJewelGot:!1,greenJewelGot:!1,monster1Alive:!0,monster1Prefab:{default:null,type:cc.Prefab},monster2Alive:!0,monster2Prefab:{default:null,type:cc.Prefab},redJewelPrefab:{default:null,type:cc.Prefab},yellowJewelPrefab:{default:null,type:cc.Prefab},blueJewelPrefab:{default:null,type:cc.Prefab},greenJewelPrefab:{default:null,type:cc.Prefab},altarPrefab:{default:null,type:cc.Prefab},fr:{default:null,type:cc.Prefab},lf:{default:null,type:cc.Prefab},lfr:{default:null,type:cc.Prefab},lr:{default:null,type:cc.Prefab},l:{default:null,type:cc.Prefab},f:{default:null,type:cc.Prefab},r:{default:null,type:cc.Prefab},bug:{default:null,type:cc.Prefab},bugLabelPrefab:{default:null,type:cc.Prefab},button0Prefab:{default:null,type:cc.Prefab},button1Prefab:{default:null,type:cc.Prefab},button2Prefab:{default:null,type:cc.Prefab},currentBGM:{default:null,type:cc.AudioSource},mainBGM:{default:null,type:cc.AudioSource},jewelBGM:{default:null,type:cc.AudioSource},monsterBGM:{default:null,type:cc.AudioSource},altarBGM:{default:null,type:cc.AudioSource},bugBGM:{default:null,type:cc.AudioSource},deathBGM:{default:null,type:cc.AudioSource},battleSound:{default:null,type:cc.AudioSource},obtainSound:{default:null,type:cc.AudioSource},successSound:{default:null,type:cc.AudioSource},leftbound:-50,rightbound:50,upbound:-260,downbound:-300},start:function(){this.background=cc.instantiate(this.nodeData[0].tag),this.canvas.addChild(this.background,-1);var e=Math.floor(100*cc.random0To1());this.absoluteRedJewelNode=e%this.validNodeCount+1;var t=Math.floor(100*cc.random0To1());this.absoluteYellowJewelNode=t%this.validNodeCount+1;var n=Math.floor(100*cc.random0To1());this.absoluteBlueJewelNode=n%this.validNodeCount+1;var a=Math.floor(100*cc.random0To1());this.absoluteGreenJewelNode=a%this.validNodeCount+1;var o=Math.floor(100*cc.random0To1());this.absoluteAltarNode=o%this.validNodeCount+1;var l=Math.floor(100*cc.random0To1());this.absoluteMonster1Node=l%this.validNodeCount+1;var r=Math.floor(100*cc.random0To1());this.absoluteMonster2Node=r%this.validNodeCount+1,this.setInputControl(),this.stepLabel.string="体力："+this.stepCount,this.moneyNode=cc.director.getScene().getChildByName("MoneyNode"),this.moneyLabel.string="金币："+this.moneyNode.getComponent("MoneyNode").money,this.mainBGM.loop=!0,this.mainBGM.play(),this.currentBGM=this.mainBGM},DFS:function(e){var t=this;if(!(null!=t.nodeData[e]||44<e||e<-44||Math.abs(e)%10==5)){t.nodeData[e]=new a,null!=t.nodeData[e+10]&&(t.nodeData[e+10].down?t.nodeData[e].up=!0:t.nodeData[e].up=!1),null!=t.nodeData[e-10]&&(t.nodeData[e-10].up?t.nodeData[e].down=!0:t.nodeData[e].down=!1),null!=t.nodeData[e+1]&&(t.nodeData[e+1].left?t.nodeData[e].right=!0:t.nodeData[e].right=!1),null!=t.nodeData[e-1]&&(t.nodeData[e-1].right?t.nodeData[e].left=!0:t.nodeData[e].left=!1),35<e&&(t.nodeData[e].up=!1),e<-35&&(t.nodeData[e].down=!1),(e+100)%10==4&&(t.nodeData[e].right=!1),(e+100)%10==6&&(t.nodeData[e].left=!1);var n=14*cc.random0To1();null==t.nodeData[e].up&&(t.nodeData[e].up=n<6||10<=n&&n<12),null==t.nodeData[e].down&&(Math.floor(n)%2==1?t.nodeData[e].down=!0:t.nodeData[e].down=!1),null==t.nodeData[e].left&&(t.nodeData[e].left=n<10&&2<=n),null==t.nodeData[e].right&&(t.nodeData[e].right=n<2||4<=n&&n<8||12<=n),t.nodeData[e].up&&!t.nodeData[e].left&&t.nodeData[e].right?(t.nodeData[e].tag=t.fr,t.nodeData[e].valid=!0):t.nodeData[e].up&&t.nodeData[e].left&&!t.nodeData[e].right?(t.nodeData[e].tag=t.lf,t.nodeData[e].valid=!0):t.nodeData[e].up&&t.nodeData[e].left&&t.nodeData[e].right?(t.nodeData[e].tag=t.lfr,t.nodeData[e].valid=!0):!t.nodeData[e].up&&t.nodeData[e].left&&t.nodeData[e].right?(t.nodeData[e].tag=t.lr,t.nodeData[e].valid=!0):t.nodeData[e].up||!t.nodeData[e].left||t.nodeData[e].right?!t.nodeData[e].up||t.nodeData[e].left||t.nodeData[e].right?t.nodeData[e].up||t.nodeData[e].left||!t.nodeData[e].right?t.nodeData[e].tag=t.bug:(t.nodeData[e].tag=t.r,t.nodeData[e].valid=!0):(t.nodeData[e].tag=t.f,t.nodeData[e].valid=!0):(t.nodeData[e].tag=t.l,t.nodeData[e].valid=!0),t.nodeData[e].valid&&(t.validNodeCount++,t.nodeData[e].absoluteValidIndex=t.validNodeCount),t.nodeData[e].up&&t.DFS(e+10),t.nodeData[e].down&&t.DFS(e-10),t.nodeData[e].left&&t.DFS(e-1),t.nodeData[e].right&&t.DFS(e+1)}},onLoad:function(){var e=this,t=14*cc.random0To1();e.nodeData=new o,e.nodeData[0]=new a,t<2?(e.nodeData[0].tag=e.fr,e.nodeData[0].up=!0,e.nodeData[0].down=!0,e.nodeData[0].left=!1,e.nodeData[0].right=!0,t<1&&(e.nodeData[0].down=!1)):t<4?(e.nodeData[0].tag=e.lf,e.nodeData[0].up=!0,e.nodeData[0].down=!0,e.nodeData[0].left=!0,e.nodeData[0].right=!1,t<3&&(e.nodeData[0].down=!1)):t<6?(e.nodeData[0].tag=e.lfr,e.nodeData[0].up=!0,e.nodeData[0].down=!0,e.nodeData[0].left=!0,e.nodeData[0].right=!0,t<5&&(e.nodeData[0].down=!1)):t<8?(e.nodeData[0].tag=e.lr,e.nodeData[0].up=!1,e.nodeData[0].down=!0,e.nodeData[0].left=!0,e.nodeData[0].right=!0,t<7&&(e.nodeData[0].down=!1)):t<10?(e.nodeData[0].tag=e.l,e.nodeData[0].up=!1,e.nodeData[0].down=!0,e.nodeData[0].left=!0,e.nodeData[0].right=!1,t<9&&(e.nodeData[0].down=!1)):t<12?(e.nodeData[0].tag=e.f,e.nodeData[0].up=!0,e.nodeData[0].down=!0,e.nodeData[0].left=!1,e.nodeData[0].right=!1,t<11&&(e.nodeData[0].down=!1)):(e.nodeData[0].tag=e.r,e.nodeData[0].up=!1,e.nodeData[0].down=!0,e.nodeData[0].left=!1,e.nodeData[0].right=!0,t<13&&(e.nodeData[0].down=!1)),e.nodeData[0].up&&e.DFS(10),e.nodeData[0].down&&e.DFS(-10),e.nodeData[0].left&&e.DFS(-1),e.nodeData[0].right&&e.DFS(1)},getProperScale:function(){return(700-this.node.y)/1e3},checkIfInstantiateSomething:function(){var e=this;e.nodeData[e.currentNode].absoluteValidIndex==e.absoluteRedJewelNode?null!=e.redJewel||e.redJewelGot||(e.redJewel=cc.instantiate(e.redJewelPrefab),e.canvas.addChild(e.redJewel,-1),e.nodeData[e.currentNode].up||(e.nodeData[e.currentNode].left?e.redJewel.x=-180:e.redJewel.x=180,e.redJewel.y=-250),e.mainBGM.isPlaying&&e.currentBGM.pause(),e.jewelBGM.play(),e.currentBGM=e.jewelBGM):null!=e.redJewel&&(e.redJewel.destroy(),e.redJewel=null),e.nodeData[e.currentNode].absoluteValidIndex==e.absoluteYellowJewelNode?null!=e.yellowJewel||e.yellowJewelGot||(e.yellowJewel=cc.instantiate(e.yellowJewelPrefab),e.canvas.addChild(e.yellowJewel,-1),e.nodeData[e.currentNode].up||(e.nodeData[e.currentNode].left?e.yellowJewel.x=-180:e.yellowJewel.x=180,e.yellowJewel.y=-250),e.mainBGM.isPlaying&&e.currentBGM.pause(),e.jewelBGM.play(),e.currentBGM=e.jewelBGM):null!=e.yellowJewel&&(e.yellowJewel.destroy(),e.yellowJewel=null),e.nodeData[e.currentNode].absoluteValidIndex==e.absoluteBlueJewelNode?null!=e.blueJewel||e.blueJewelGot||(e.blueJewel=cc.instantiate(e.blueJewelPrefab),e.canvas.addChild(e.blueJewel,-1),e.nodeData[e.currentNode].up||(e.nodeData[e.currentNode].left?e.blueJewel.x=-180:e.blueJewel.x=180,e.blueJewel.y=-250),e.mainBGM.isPlaying&&e.currentBGM.pause(),e.jewelBGM.play(),e.currentBGM=e.jewelBGM):null!=e.blueJewel&&(e.blueJewel.destroy(),e.blueJewel=null),e.nodeData[e.currentNode].absoluteValidIndex==e.absoluteGreenJewelNode?null!=e.greenJewel||e.greenJewelGot||(e.greenJewel=cc.instantiate(e.greenJewelPrefab),e.canvas.addChild(e.greenJewel,-1),e.nodeData[e.currentNode].up||(e.nodeData[e.currentNode].left?e.greenJewel.x=-180:e.greenJewel.x=180,e.greenJewel.y=-250),e.mainBGM.isPlaying&&e.currentBGM.pause(),e.jewelBGM.play(),e.currentBGM=e.jewelBGM):null!=e.greenJewel&&(e.greenJewel.destroy(),e.greenJewel=null),e.nodeData[e.currentNode].absoluteValidIndex!=e.absoluteRedJewelNode&&e.nodeData[e.currentNode].absoluteValidIndex!=e.absoluteYellowJewelNode&&e.nodeData[e.currentNode].absoluteValidIndex!=e.absoluteBlueJewelNode&&e.nodeData[e.currentNode].absoluteValidIndex!=e.absoluteGreenJewelNode&&e.jewelBGM.isPlaying&&e.jewelBGM.stop(),e.nodeData[e.currentNode].absoluteValidIndex==e.absoluteAltarNode?null==e.altar&&(e.altar=cc.instantiate(e.altarPrefab),e.canvas.addChild(e.altar,-1),e.nodeData[e.currentNode].up||(e.altar.y=-250),e.mainBGM.isPlaying&&e.currentBGM.pause(),e.altarBGM.play(),e.currentBGM=e.altarBGM):(null!=e.altar&&(e.altar.destroy(),e.altar=null),e.altarBGM.isPlaying&&e.altarBGM.stop()),e.nodeData[e.currentNode].absoluteValidIndex==e.absoluteMonster1Node?null==e.monster1&&e.monster1Alive&&(e.monster1=cc.instantiate(e.monster1Prefab),e.canvas.addChild(e.monster1,-1),e.nodeData[e.currentNode].up||(e.nodeData[e.currentNode].left?e.monster1.x=-180:e.monster1.x=180,e.monster1.y=-250),e.mainBGM.isPlaying&&e.currentBGM.pause(),e.monsterBGM.play(),e.currentBGM=e.monsterBGM):null!=e.monster1&&(e.monster1.destroy(),e.monster1=null),e.nodeData[e.currentNode].absoluteValidIndex==e.absoluteMonster2Node?null==e.monster2&&e.monster2Alive&&(e.monster2=cc.instantiate(e.monster2Prefab),e.canvas.addChild(e.monster2,-1),e.nodeData[e.currentNode].up||(e.nodeData[e.currentNode].left?e.monster2.x=-180:e.monster2.x=180,e.monster2.y=-200),e.mainBGM.isPlaying&&e.currentBGM.pause(),e.monsterBGM.play(),e.currentBGM=e.monsterBGM):null!=e.monster2&&(e.monster2.destroy(),e.monster2=null),e.nodeData[e.currentNode].absoluteValidIndex!=e.absoluteMonster1Node&&e.nodeData[e.currentNode].absoluteValidIndex!=e.absoluteMonster2Node&&e.monsterBGM.isPlaying&&e.monsterBGM.stop()},setInputControl:function(){var a=this.node,o=this;cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,function(e){if(!o.battleEngaged){var t=50,n=50;switch(e.keyCode){case cc.KEY.up:if(a.getComponent(cc.Sprite).spriteFrame=o.atlas.getSpriteFrame("player_back"),(a.x>o.rightbound+t||a.x<o.leftbound-t)&&a.y>o.upbound)break;if(!o.nodeData[o.currentNode].up&&a.y>=o.upbound)break;a.y+=n,o.stepCount--,320<=a.y&&(o.background.destroy(),o.background=cc.instantiate(o.nodeData[o.currentNode+10].tag),o.canvas.addChild(o.background,-1),a.y=-300,o.currentNode+=10,o.nodeLabel.string=o.getNodeText(),o.nodeData[o.currentNode].up||o.nodeData[o.currentNode].left||o.nodeData[o.currentNode].right||(o.nodeData[o.currentNode-10].up=!1,o.stepCount+=300,o.bugLabel=cc.instantiate(o.bugLabelPrefab),o.canvas.addChild(o.bugLabel,0),o.mainBGM.isPlaying&&o.currentBGM.pause(),o.bugBGM.play(),o.currentBGM=o.bugBGM,o.absoluteBugNode=o.currentNode),o.checkIfInstantiateSomething()),a.setScale(o.getProperScale(),o.getProperScale()),null!=o.monster1&&cc.pDistance(a.position,o.monster1.position)<120&&(50<=o.moneyNode.getComponent("MoneyNode").money?(o.monster1.destroy(),o.monster1=null,o.monster1Alive=!1,o.moneyNode.getComponent("MoneyNode").money-=50):(a.y-=n,o.stepCount++)),null!=o.monster2&&cc.pDistance(a.position,o.monster2.position)<150&&(50<=o.moneyNode.getComponent("MoneyNode").money?(o.monster2.destroy(),o.monster2=null,o.monster2Alive=!1,o.moneyNode.getComponent("MoneyNode").money-=50):(a.y-=n,o.stepCount++));break;case cc.KEY.down:if(a.getComponent(cc.Sprite).spriteFrame=o.atlas.getSpriteFrame("player"),(a.x>o.rightbound+t||a.x<o.leftbound-t)&&a.y<=o.downbound)break;a.y-=n,o.stepCount--,a.y<=-320&&(o.nodeData[o.currentNode].down?(o.background.destroy(),o.background=cc.instantiate(o.nodeData[o.currentNode-10].tag),o.canvas.addChild(o.background,-1),a.y=300,o.currentNode-=10,o.nodeLabel.string=o.getNodeText(),o.checkIfInstantiateSomething()):(a.y+=n,o.stepCount++),o.currentNode!=o.absoluteBugNode&&(null!=o.bugLabel&&(o.bugLabel.destroy(),o.bugLabel=null),o.bugBGM.isPlaying&&o.bugBGM.stop())),a.setScale(o.getProperScale(),o.getProperScale()),null!=o.monster1&&cc.pDistance(a.position,o.monster1.position)<120&&(50<=o.moneyNode.getComponent("MoneyNode").money?(o.monster1.destroy(),o.monster1=null,o.monster1Alive=!1,o.moneyNode.getComponent("MoneyNode").money-=50):(a.y+=n,o.stepCount++)),null!=o.monster2&&cc.pDistance(a.position,o.monster2.position)<150&&(50<=o.moneyNode.getComponent("MoneyNode").money?(o.monster2.destroy(),o.monster2=null,o.monster2Alive=!1,o.moneyNode.getComponent("MoneyNode").money-=50):(a.y+=n,o.stepCount++));break;case cc.KEY.left:if(a.getComponent(cc.Sprite).spriteFrame=o.atlas.getSpriteFrame("player_left"),(a.x>o.rightbound+t||a.x<o.leftbound)&&a.y>o.upbound+n)break;if(!o.nodeData[o.currentNode].left&&a.x<o.leftbound)break;a.x-=t,o.stepCount--,a.x<=-480&&(o.background.destroy(),o.background=cc.instantiate(o.nodeData[o.currentNode-1].tag),o.canvas.addChild(o.background,-1),a.x=480,o.currentNode--,o.nodeLabel.string=o.getNodeText(),o.checkIfInstantiateSomething()),null!=o.monster1&&cc.pDistance(a.position,o.monster1.position)<120&&(50<=o.moneyNode.getComponent("MoneyNode").money?(o.monster1.destroy(),o.monster1=null,o.monster1Alive=!1,o.moneyNode.getComponent("MoneyNode").money-=50):(a.x+=t,o.stepCount++)),null!=o.monster2&&cc.pDistance(a.position,o.monster2.position)<150&&(50<=o.moneyNode.getComponent("MoneyNode").money?(o.monster2.destroy(),o.monster2=null,o.monster2Alive=!1,o.moneyNode.getComponent("MoneyNode").money-=50):(a.x+=t,o.stepCount++));break;case cc.KEY.right:if(a.getComponent(cc.Sprite).spriteFrame=o.atlas.getSpriteFrame("player_right"),(a.x>o.rightbound||a.x<o.leftbound-t)&&a.y>o.upbound+n)break;if(!o.nodeData[o.currentNode].right&&a.x>o.rightbound)break;a.x+=t,o.stepCount--,480<=a.x&&(o.background.destroy(),o.background=cc.instantiate(o.nodeData[o.currentNode+1].tag),o.canvas.addChild(o.background,-1),a.x=-480,o.currentNode++,o.nodeLabel.string=o.getNodeText(),o.checkIfInstantiateSomething()),null!=o.monster1&&cc.pDistance(a.position,o.monster1.position)<120&&(50<=o.moneyNode.getComponent("MoneyNode").money?(o.monster1.destroy(),o.monster1=null,o.monster1Alive=!1,o.moneyNode.getComponent("MoneyNode").money-=50):(a.x-=t,o.stepCount++)),null!=o.monster2&&cc.pDistance(a.position,o.monster2.position)<150&&(50<=o.moneyNode.getComponent("MoneyNode").money?(o.monster2.destroy(),o.monster2=null,o.monster2Alive=!1,o.moneyNode.getComponent("MoneyNode").money-=50):(a.x-=t,o.stepCount++))}o.nodeData[o.currentNode].absoluteValidIndex==o.absoluteRedJewelNode&&null!=o.redJewel&&cc.pDistance(a.position,o.redJewel.position)<100&&(o.battleEngaged=!0,o.obtainSound.play(),o.soundPlaying=!0,setTimeout(function(){o.soundPlaying=!1,o.battleEngaged=!1},4e3),o.redJewel.destroy(),o.redJewel=null,o.redJewelGot=!0),o.nodeData[o.currentNode].absoluteValidIndex==o.absoluteYellowJewelNode&&null!=o.yellowJewel&&cc.pDistance(a.position,o.yellowJewel.position)<100&&(o.battleEngaged=!0,o.obtainSound.play(),o.soundPlaying=!0,setTimeout(function(){o.soundPlaying=!1,o.battleEngaged=!1},4e3),o.yellowJewel.destroy(),o.yellowJewel=null,o.yellowJewelGot=!0),o.nodeData[o.currentNode].absoluteValidIndex==o.absoluteBlueJewelNode&&null!=o.blueJewel&&cc.pDistance(a.position,o.blueJewel.position)<100&&(o.battleEngaged=!0,o.obtainSound.play(),o.soundPlaying=!0,setTimeout(function(){o.soundPlaying=!1,o.battleEngaged=!1},4e3),o.blueJewel.destroy(),o.blueJewel=null,o.blueJewelGot=!0),o.nodeData[o.currentNode].absoluteValidIndex==o.absoluteGreenJewelNode&&null!=o.greenJewel&&cc.pDistance(a.position,o.greenJewel.position)<100&&(o.battleEngaged=!0,o.obtainSound.play(),o.soundPlaying=!0,setTimeout(function(){o.soundPlaying=!1,o.battleEngaged=!1},4e3),o.greenJewel.destroy(),o.greenJewel=null,o.greenJewelGot=!0),null!=o.altar&&o.redJewelGot&&o.yellowJewelGot&&o.blueJewelGot&&o.greenJewelGot&&cc.pDistance(a.position,o.altar.position)<150&&(cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN),o.currentBGM.pause(),o.successSound.play(),o.soundPlaying=!0,0<o.moneyNode.getComponent("MoneyNode").money?o.moneyNode.getComponent("MoneyNode").money*=2:o.moneyNode.getComponent("MoneyNode").money+=50,setTimeout(function(){o.button1=cc.instantiate(o.button1Prefab),o.canvas.addChild(o.button1,1),o.button2=cc.instantiate(o.button2Prefab),o.canvas.addChild(o.button2,1)},6e3)),o.stepLabel.string="体力："+o.stepCount,o.countJewels(),o.moneyLabel.string="金币："+o.moneyNode.getComponent("MoneyNode").money,0!=o.stepCount&&0!=o.lifeCount||(cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN),o.stepLabel.string="你死了！",o.lifeLabel.string="",o.jewelLabel.string="",o.currentBGM.stop(),o.deathBGM.play(),o.currentBGM=o.deathBGM,o.button0=cc.instantiate(o.button0Prefab),o.canvas.addChild(o.button0,1),cc.game.removePersistRootNode(o.moneyNode)),o.currentBGM.isPlaying||o.soundPlaying||o.battleEngaged||(o.mainBGM.resume(),o.currentBGM=o.mainBGM)}})},getNodeText:function(){var e=Math.floor((this.currentNode+5)/10),t=(this.currentNode+100)%10;5<t&&(t-=10);var n="";return 0<e?n+="上"+e:e<0&&(n+="下"+-e),0<t?n+="右"+t:t<0&&(n+="左"+-t),0==e&&0==t&&(n+="原点"),"当前位置："+n},countJewels:function(){this.jewelLabel.string="已获得宝石：",this.redJewelGot&&(this.jewelLabel.string+="\n红宝石"),this.yellowJewelGot&&(this.jewelLabel.string+="\n黄宝石"),this.blueJewelGot&&(this.jewelLabel.string+="\n蓝宝石"),this.greenJewelGot&&(this.jewelLabel.string+="\n绿宝石")}}),cc._RF.pop()},{}],Player:[function(e,t,n){"use strict";cc._RF.push(t,"e281a0+m+NJHIQ7RH8LQT5y","Player"),cc.Class({extends:cc.Component,properties:{atlas:{default:null,type:cc.SpriteAtlas},canvas:{default:null,type:cc.Node},background:{default:null,type:cc.Node},monster1:{default:null,type:cc.Node},monster2:{default:null,type:cc.Node},redJewel:{default:null,type:cc.Node},yellowJewel:{default:null,type:cc.Node},blueJewel:{default:null,type:cc.Node},greenJewel:{default:null,type:cc.Node},altar:{default:null,type:cc.Node},stepLabel:{default:null,type:cc.Label},lifeLabel:{default:null,type:cc.Label},jewelLabel:{default:null,type:cc.Label},layout1:{default:null,type:cc.Layout},layout2:{default:null,type:cc.Layout},currentNode:0,stepCount:300,lifeCount:3,redJewelGot:!1,yellowJewelGot:!1,blueJewelGot:!1,greenJewelGot:!1,monster1Alive:!0,monster2Alive:!0,monster1Prefab:{default:null,type:cc.Prefab},monster2Prefab:{default:null,type:cc.Prefab},redJewelPrefab:{default:null,type:cc.Prefab},yellowJewelPrefab:{default:null,type:cc.Prefab},blueJewelPrefab:{default:null,type:cc.Prefab},greenJewelPrefab:{default:null,type:cc.Prefab},altarPrefab:{default:null,type:cc.Prefab},fr:{default:null,type:cc.Prefab},lf:{default:null,type:cc.Prefab},lfr:{default:null,type:cc.Prefab},lr:{default:null,type:cc.Prefab},l:{default:null,type:cc.Prefab},f:{default:null,type:cc.Prefab},r:{default:null,type:cc.Prefab},button0Prefab:{default:null,type:cc.Prefab},currentBGM:{default:null,type:cc.AudioSource},initialBGM:{default:null,type:cc.AudioSource},mainBGM:{default:null,type:cc.AudioSource},jewelBGM:{default:null,type:cc.AudioSource},monsterBGM:{default:null,type:cc.AudioSource},altarBGM:{default:null,type:cc.AudioSource},deathBGM:{default:null,type:cc.AudioSource},battleSound:{default:null,type:cc.AudioSource},obtainSound:{default:null,type:cc.AudioSource},successSound:{default:null,type:cc.AudioSource},leftbound:-50,rightbound:50,upbound:-260,downbound:-300},onLoad:function(){this.background=cc.instantiate(this.fr),this.canvas.addChild(this.background,-1),this.setInputControl()},start:function(){this.initialBGM.play(),this.currentBGM=this.initialBGM},getProperScale:function(){return(700-this.node.y)/1e3},setInputControl:function(){var a=this.node,o=this;cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,function(e){if(!o.battleEngaged){switch(e.keyCode){case cc.KEY.up:if(a.getComponent(cc.Sprite).spriteFrame=o.atlas.getSpriteFrame("player_back"),(a.x>o.rightbound+50||a.x<o.leftbound-50)&&a.y>o.upbound)break;if((12==o.currentNode||13==o.currentNode||14==o.currentNode)&&a.y>=o.upbound)break;if(a.y+=50,o.stepCount--,320<=a.y)switch(o.currentNode){case 0:case 2:case 5:o.background.destroy(),o.background=cc.instantiate(o.fr),o.canvas.addChild(o.background,-1),a.y=-300,o.currentNode+=4;break;case 1:case 3:case 6:o.background.destroy(),o.background=cc.instantiate(o.lf),o.canvas.addChild(o.background,-1),a.y=-300,o.currentNode+=4;break;case 4:case 7:o.background.destroy(),o.background=cc.instantiate(o.f),o.canvas.addChild(o.background,-1),a.y=-300,o.currentNode+=4;break;case 9:case 10:o.background.destroy(),o.background=cc.instantiate(o.lr),o.canvas.addChild(o.background,-1),a.y=-300,o.currentNode+=4;break;case 8:o.background.destroy(),o.background=cc.instantiate(o.r),o.canvas.addChild(o.background,-1),a.y=-300,o.currentNode+=4;break;case 12:case 13:case 14:case 15:a.y-=50,o.stepCount++;break;case 11:o.background.destroy(),o.background=cc.instantiate(o.lfr),o.canvas.addChild(o.background,-1),a.y=-300,o.currentNode+=4}a.setScale(o.getProperScale(),o.getProperScale());break;case cc.KEY.down:if(a.getComponent(cc.Sprite).spriteFrame=o.atlas.getSpriteFrame("player"),(a.x>o.rightbound+50||a.x<o.leftbound-50)&&a.y<=o.downbound)break;if(a.y-=50,o.stepCount--,a.y<=-320)switch(o.currentNode){case 5:case 6:o.background.destroy(),o.background=cc.instantiate(o.lfr),o.canvas.addChild(o.background,-1),a.y=300,o.currentNode-=4;break;case 4:case 8:case 10:case 13:o.background.destroy(),o.background=cc.instantiate(o.fr),o.canvas.addChild(o.background,-1),a.y=300,o.currentNode-=4;break;case 7:case 9:case 11:case 14:o.background.destroy(),o.background=cc.instantiate(o.lf),o.canvas.addChild(o.background,-1),a.y=300,o.currentNode-=4;break;case 12:case 15:o.background.destroy(),o.background=cc.instantiate(o.f),o.canvas.addChild(o.background,-1),a.y=300,o.currentNode-=4;break;case 0:case 1:case 2:case 3:a.y+=50,o.stepCount++}a.setScale(o.getProperScale(),o.getProperScale());break;case cc.KEY.left:if(a.getComponent(cc.Sprite).spriteFrame=o.atlas.getSpriteFrame("player_left"),(a.x>o.rightbound+50||a.x<o.leftbound)&&a.y>o.upbound+50)break;if((0==o.currentNode||4==o.currentNode||6==o.currentNode||8==o.currentNode||9==o.currentNode||11==o.currentNode||12==o.currentNode)&&a.x<o.leftbound)break;if(a.x-=50,o.stepCount--,a.x<=-480)switch(o.currentNode){case 2:case 3:case 5:case 6:case 9:o.background.destroy(),o.background=cc.instantiate(o.lfr),o.canvas.addChild(o.background,-1),a.x=480,o.currentNode--;break;case 1:case 5:case 7:case 10:o.background.destroy(),o.background=cc.instantiate(o.fr),o.canvas.addChild(o.background,-1),a.x=480,o.currentNode--;break;case 0:case 4:case 6:case 8:case 9:case 11:case 12:a.x+=50,o.stepCount++;break;case 13:o.background.destroy(),o.background=cc.instantiate(o.r),o.canvas.addChild(o.background,-1),a.x=480,o.currentNode--;break;case 14:case 15:o.background.destroy(),o.background=cc.instantiate(o.lr),o.canvas.addChild(o.background,-1),a.x=480,o.currentNode--}a.setScale(o.getProperScale(),o.getProperScale());break;case cc.KEY.right:if(a.getComponent(cc.Sprite).spriteFrame=o.atlas.getSpriteFrame("player_right"),(a.x>o.rightbound||a.x<o.leftbound-50)&&a.y>o.upbound+50)break;if((3==o.currentNode||5==o.currentNode||7==o.currentNode||8==o.currentNode||10==o.currentNode||11==o.currentNode)&&a.x>o.rightbound)break;if(a.x+=50,o.stepCount--,480<=a.x)switch(o.currentNode){case 0:case 1:o.background.destroy(),o.background=cc.instantiate(o.lfr),o.canvas.addChild(o.background,-1),a.x=-480,o.currentNode++;break;case 2:case 4:case 6:case 9:o.background.destroy(),o.background=cc.instantiate(o.lf),o.canvas.addChild(o.background,-1),a.x=-480,o.currentNode++;break;case 3:case 5:case 7:case 8:case 10:case 11:case 15:a.x-=50,o.stepCount++;break;case 12:case 13:o.background.destroy(),o.background=cc.instantiate(o.lr),o.canvas.addChild(o.background,-1),a.x=-480,o.currentNode++;break;case 14:o.background.destroy(),o.background=cc.instantiate(o.lfr),o.canvas.addChild(o.background,-1),a.x=-480,o.currentNode++}a.setScale(o.getProperScale(),o.getProperScale())}if(o.stepLabel.string="体力："+o.stepCount,o.lifeLabel.string="生命："+o.lifeCount,o.countJewels(),0==o.stepCount||0==o.lifeCount)return cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN),o.stepLabel.string="你死了！",o.lifeLabel.string="",o.jewelLabel.string="",o.currentBGM.stop(),o.deathBGM.play(),o.currentBGM=o.deathBGM,o.button0=cc.instantiate(o.button0Prefab),void o.canvas.addChild(o.button0,1);if(3==o.currentNode){if(null==o.monster1&&o.monster1Alive)o.monster1=cc.instantiate(o.monster1Prefab),o.canvas.addChild(o.monster1,-1),o.currentBGM.pause(),o.monsterBGM.play(),o.currentBGM=o.monsterBGM;else if(null!=o.monster1&&cc.pDistance(a.position,o.monster1.position)<120&&!o.battleEngaged){o.battleEngaged=!0,o.currentBGM.volume=.5,o.battleSound.play();for(var t=o.monster1.opacity=0,n=0;n<5;n++)setTimeout(function(){o.monster1.opacity=255,a.opacity=0},t+=300),setTimeout(function(){o.monster1.opacity=0,a.opacity=255},t+=300);setTimeout(function(){o.monster1.destroy(),o.monster1=null,o.battleEngaged=!1,o.currentBGM.volume=1},t),o.monster1Alive=!1,o.lifeCount--}}else null!=o.monster1&&(o.monster1.destroy(),o.monster1=null);if(8==o.currentNode){if(null==o.monster2&&o.monster2Alive)o.monster2=cc.instantiate(o.monster2Prefab),o.canvas.addChild(o.monster2,-1),o.currentBGM.pause(),o.monsterBGM.play(),o.currentBGM=o.monsterBGM;else if(null!=o.monster2&&cc.pDistance(a.position,o.monster2.position)<150&&!o.battleEngaged){o.battleEngaged=!0,o.currentBGM.volume=.5,o.battleSound.play();for(t=o.monster2.opacity=0,n=0;n<5;n++)setTimeout(function(){o.monster2.opacity=255,a.opacity=0},t+=300),setTimeout(function(){o.monster2.opacity=0,a.opacity=255},t+=300);setTimeout(function(){o.monster2.destroy(),o.monster2=null,o.battleEngaged=!1,o.currentBGM.volume=1},t),o.monster2Alive=!1,o.lifeCount-=2}}else null!=o.monster2&&(o.monster2.destroy(),o.monster2=null);if(3!=o.currentNode&&8!=o.currentNode&&o.monsterBGM.isPlaying&&o.currentBGM.stop(),3==o.currentNode?null!=o.redJewel||o.redJewelGot?(null!=o.redJewel&&cc.pDistance(a.position,o.redJewel.position)<100&&(o.battleEngaged=!0,o.obtainSound.play(),o.soundPlaying=!0,setTimeout(function(){o.soundPlaying=!1,o.battleEngaged=!1},4e3),o.redJewel.destroy(),o.redJewel=null,o.redJewelGot=!0),o.monster1Alive||o.jewelBGM.isPlaying||o.redJewelGot||o.battleEngaged||!(0<o.stepCount)||(o.currentBGM.pause(),o.jewelBGM.play(),o.currentBGM=o.jewelBGM)):(o.redJewel=cc.instantiate(o.redJewelPrefab),o.canvas.addChild(o.redJewel,-1),o.redJewel.y=180):null!=o.redJewel&&(o.redJewel.destroy(),o.redJewel=null),6==o.currentNode?null!=o.yellowJewel||o.yellowJewelGot?null!=o.yellowJewel&&cc.pDistance(a.position,o.yellowJewel.position)<100&&(o.battleEngaged=!0,o.obtainSound.play(),o.soundPlaying=!0,setTimeout(function(){o.soundPlaying=!1,o.battleEngaged=!1},4e3),o.yellowJewel.destroy(),o.yellowJewel=null,o.yellowJewelGot=!0):(o.yellowJewel=cc.instantiate(o.yellowJewelPrefab),o.canvas.addChild(o.yellowJewel,-1),o.currentBGM.pause(),o.jewelBGM.play(),o.currentBGM=o.jewelBGM):null!=o.yellowJewel&&(o.yellowJewel.destroy(),o.yellowJewel=null),9==o.currentNode?null!=o.blueJewel||o.blueJewelGot?null!=o.blueJewel&&cc.pDistance(a.position,o.blueJewel.position)<100&&(o.battleEngaged=!0,o.obtainSound.play(),o.soundPlaying=!0,setTimeout(function(){o.soundPlaying=!1,o.battleEngaged=!1},4e3),o.blueJewel.destroy(),o.blueJewel=null,o.blueJewelGot=!0):(o.blueJewel=cc.instantiate(o.blueJewelPrefab),o.canvas.addChild(o.blueJewel,-1),o.currentBGM.pause(),o.jewelBGM.play(),o.currentBGM=o.jewelBGM):null!=o.blueJewel&&(o.blueJewel.destroy(),o.blueJewel=null),10==o.currentNode?null!=o.greenJewel||o.greenJewelGot?null!=o.greenJewel&&cc.pDistance(a.position,o.greenJewel.position)<100&&(o.battleEngaged=!0,o.obtainSound.play(),o.soundPlaying=!0,setTimeout(function(){o.soundPlaying=!1,o.battleEngaged=!1},4e3),o.greenJewel.destroy(),o.greenJewel=null,o.greenJewelGot=!0):(o.greenJewel=cc.instantiate(o.greenJewelPrefab),o.canvas.addChild(o.greenJewel,-1),o.currentBGM.pause(),o.jewelBGM.play(),o.currentBGM=o.jewelBGM):null!=o.greenJewel&&(o.greenJewel.destroy(),o.greenJewel=null),3!=o.currentNode&&6!=o.currentNode&&9!=o.currentNode&&10!=o.currentNode&&o.jewelBGM.isPlaying&&o.currentBGM.stop(),15==o.currentNode){if(null==o.altar)o.altar=cc.instantiate(o.altarPrefab),o.canvas.addChild(o.altar,-1),o.currentBGM.pause(),o.altarBGM.play(),o.currentBGM=o.altarBGM;else if(o.redJewelGot&&o.yellowJewelGot&&o.blueJewelGot&&o.greenJewelGot&&cc.pDistance(a.position,o.altar.position)<150){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN),o.currentBGM.pause(),o.successSound.play(),o.soundPlaying=!0;t=3500;setTimeout(function(){a.opacity=200,o.background.opacity=200,o.altar.opacity=200},t+=200),setTimeout(function(){a.opacity=150,o.background.opacity=150,o.altar.opacity=150},t+=200),setTimeout(function(){a.opacity=100,o.background.opacity=100,o.altar.opacity=100},t+=200),setTimeout(function(){a.opacity=0,o.background.opacity=0,o.altar.opacity=0},t+=200),setTimeout(function(){cc.director.loadScene("interlude")},t)}}else null!=o.altar&&(o.altar.destroy(),o.altar=null),o.altarBGM.isPlaying&&o.currentBGM.stop();null!=o.layout1.node?o.layout1.node.destroy():null!=o.layout2.node&&(o.layout2.node.destroy(),o.initialBGM.stop(),o.mainBGM.loop=!0,o.mainBGM.play(),o.currentBGM=o.mainBGM),o.currentBGM.isPlaying||o.soundPlaying||o.battleEngaged||(o.mainBGM.resume(),o.currentBGM=o.mainBGM)}})},countJewels:function(){this.jewelLabel.string="已获得宝石：",this.redJewelGot&&(this.jewelLabel.string+="\n红宝石"),this.yellowJewelGot&&(this.jewelLabel.string+="\n黄宝石"),this.blueJewelGot&&(this.jewelLabel.string+="\n蓝宝石"),this.greenJewelGot&&(this.jewelLabel.string+="\n绿宝石")}}),cc._RF.pop()},{}],Start:[function(e,t,n){"use strict";cc._RF.push(t,"6b600Kh6FNB3qffKZZWwmcD","Start"),cc.Class({extends:cc.Component,properties:{button1:{default:null,type:cc.Button},label1:{default:null,type:cc.Label},button2:{default:null,type:cc.Button},label2:{default:null,type:cc.Label}},startGame:function(){null!=this.button1&&(this.button1.enabled=!1,this.label1.string="载入中…",this.button2.enabled=!1),cc.director.loadScene("game")},startChallenge:function(){null!=this.button2&&(this.button1.enabled=!1,this.label2.string="载入中…",this.button2.enabled=!1),cc.director.loadScene("challenge")},goHome:function(){cc.director.loadScene("titlepage")}}),cc._RF.pop()},{}],TitleBGM:[function(e,t,n){"use strict";cc._RF.push(t,"4e824Qj5jJHu4aX/EU20rdX","TitleBGM"),cc.Class({extends:cc.Component,properties:{titleBGM:{default:null,type:cc.AudioSource}},start:function(){this.titleBGM.loop=!0,this.titleBGM.play()}}),cc._RF.pop()},{}],UpArrow:[function(e,t,n){"use strict";cc._RF.push(t,"29ee4ZesiBITIgCwXdkQ5tz","UpArrow"),cc.Class({extends:cc.Component,properties:{},start:function(){node.on(cc.Node.EventType.MOUSE_DOWN,function(e){console.log("Mouse down")},this)}}),cc._RF.pop()},{}]},{},["ChangeDialogue","MoneyNode","Player","Player2","Start","TitleBGM","UpArrow"]);